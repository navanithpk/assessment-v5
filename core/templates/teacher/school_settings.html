{% extends "teacher/teacher_base.html" %}

{% block title %}School Settings{% endblock %}

{% block content %}
<style>
    h1 { margin-top: 0; }

    .settings-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 24px; flex-wrap: wrap; gap: 12px;
    }

    .settings-card {
        background: white; border-radius: 14px; padding: 32px;
        box-shadow: 0 4px 16px rgba(0,0,0,.08); max-width: 720px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block; font-size: 12px; font-weight: 600;
        color: #5f6368; margin-bottom: 6px; text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .form-group input,
    .form-group textarea {
        width: 100%; padding: 10px 14px; border: 1px solid #d1d5db;
        border-radius: 10px; font-size: 14px; font-family: inherit;
        transition: border-color 0.2s, box-shadow 0.2s;
        box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group textarea:focus {
        outline: none; border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
    }

    .form-group textarea {
        resize: vertical; min-height: 80px;
    }

    .form-group .help-text {
        font-size: 11px; color: #9ca3af; margin-top: 4px;
    }

    .form-row {
        display: grid; grid-template-columns: 1fr 1fr; gap: 16px;
    }

    .btn {
        border: none; padding: 12px 24px; border-radius: 10px; cursor: pointer;
        font-size: 14px; font-weight: 600; display: inline-flex; align-items: center;
        gap: 8px; transition: all 0.2s;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .btn-primary { background: #2563eb; color: white; }
    .btn-secondary { background: #e2e8f0; color: #475569; }

    .school-icon {
        width: 64px; height: 64px; background: linear-gradient(135deg, #ede9fe, #dbeafe);
        border-radius: 16px; display: flex; align-items: center; justify-content: center;
        font-size: 32px; margin-bottom: 20px;
    }

    .success-msg {
        background: #f0fdf4; border: 1px solid #bbf7d0; color: #166534;
        padding: 12px 16px; border-radius: 10px; margin-bottom: 20px;
        font-size: 14px; display: flex; align-items: center; gap: 8px;
    }

    @media (max-width: 600px) {
        .form-row { grid-template-columns: 1fr; }
        .settings-card { padding: 20px; }
    }
</style>

<div class="settings-header">
    <div>
        <h1>School Settings</h1>
        <p style="color: #5f6368; font-size: 14px;">Manage your school's name, address, and contact details</p>
    </div>
</div>

{% if messages %}
{% for message in messages %}
<div class="success-msg">
    ‚úÖ {{ message }}
</div>
{% endfor %}
{% endif %}

<div class="settings-card">
    <div class="school-icon">üè´</div>

    <form method="post">
        {% csrf_token %}

        <div class="form-group">
            <label>School Name</label>
            <input type="text" name="name" value="{{ school.name }}" required maxlength="200"
                   placeholder="Enter your school name">
            <div class="help-text">This name appears on report cards, test printouts, and all exported documents.</div>
        </div>

        <div class="form-group">
            <label>School Code</label>
            <input type="text" name="code" value="{{ school.code }}" required maxlength="50"
                   placeholder="e.g. STMARY, DPS001">
            <div class="help-text">A short unique identifier for your school.</div>
        </div>

        <div class="form-group">
            <label>Address</label>
            <textarea name="address" placeholder="Enter full school address">{{ school.address }}</textarea>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Phone</label>
                <input type="text" name="phone" value="{{ school.phone }}" placeholder="+91 xxxxxxxxxx"
                       maxlength="20">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" value="{{ school.email }}" placeholder="school@example.com"
                       maxlength="200">
            </div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 8px;">
            <button type="submit" class="btn btn-primary">üíæ Save Changes</button>
            <button type="button" class="btn btn-secondary" onclick="history.back()">Cancel</button>
        </div>
    </form>
</div>

{% endblock %}
